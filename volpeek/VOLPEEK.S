	MOVE.W	#32,-(SP)
	TRAP	#1
	ADDQ.W	#2,SP

	LEA	MUZAK,A0
	LEA	$72000,A1
	MOVE.W	#3500,D0
LOP:	MOVE.L	(A0)+,(A1)+
	DBF	D0,LOP

	JSR	$72000

	MOVE.L	$44E,A1
	MOVE.L	#7999,D0
LOPEJ:	CLR.L	(A1)+
	DBF	D0,LOPEJ

	MOVE.L	#$FF8240,A0
	MOVEM.L	(A0),D0-D7
	MOVEM.L	D0-D7,OLDPAL

	MOVEM.L	GRAPICS+2,D0-D7
	MOVEM.L	D0-D7,$FF8240

SYNC:	MOVE.W	#37,-(SP)
	TRAP	#14
	ADDQ	#2,SP

	MOVE.W	#$111,$FF8240
	BSR	ROUT
	MOVE.W	#$000,$FF8240

	MOVE.W	#11,-(SP)
	TRAP	#1
	ADDQ	#2,SP

	TST.B	D0
	BEQ	SYNC

	JSR	$72006

	MOVEM.L	OLDPAL,D0-D7
	MOVEM.L	D0-D7,$FF8240

	CLR.W	-(SP)
	TRAP	#1

WHIPE:	SUB.L	#5120,COUNT
ROUT:	LEA	GRAPICS+34(PC),A0
	LEA	SINE(PC),A1
	MOVEQ	#0,D1
	ADD.L	COUNT,A1
	ADD.L	#20,COUNT
	CMP.L	#5120,COUNT
	BGT	WHIPE
	MOVE.B	(A1),D1		
	LSR.L	#1,D1
	MULU	#160,D1
	MOVEQ	#0,D0
	MOVE.B	#8,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	LEA	POSTAB(PC),A5
	LSL.L	#2,D0
	ADD.L	D0,A5
	ADD.L	(A5),A0
	MOVE.L	$44E.W,A1
	ADD.L	D1,A1
	MOVEQ	#16,D1
LOOP:	MOVE.L	(A0),(A1)
	MOVE.L	4(A0),4(A1)
	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,LOOP

	LEA	GRAPICS+34(PC),A0
	MOVEQ	#0,D0
	MOVE.B	#9,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	LEA	POSTAB(PC),A5
	LSL.L	#2,D0
	ADD.L	D0,A5
	ADD.L	(A5),A0
	MOVE.L	$44E.W,A1
	ADD.L	#16,A1
	MOVEQ	#16,D1
LOOP2:	MOVE.L	(A0),(A1)
	MOVE.L	4(A0),4(A1)
	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,LOOP2

	LEA	GRAPICS+34(PC),A0
	MOVEQ	#0,D0
	MOVE.B	#10,$FFFF8800.W
	MOVE.B	$FFFF8800.W,D0
	LEA	POSTAB(PC),A5
	LSL.L	#2,D0
	ADD.L	D0,A5
	ADD.L	(A5),A0
	MOVE.L	$44E.W,A1
	ADD.L	#32,A1
	MOVEQ	#16,D1
LOOP3:	MOVE.L	(A0),(A1)
	MOVE.L	4(A0),4(A1)
	ADD.L	#160,A0
	ADD.L	#160,A1
	DBF	D1,LOOP3

	RTS

OLDPAL:	DS.W	16
COUNT:	DC.L	0
POSTAB:	DC.L	0,8,16,24,32,40,48,56,64,72,80,88,96,104,112,120
SINE:	INCBIN	SINE.SIN
GRAPICS:	INCBIN	STARSPR.PI1
MUZAK:	INCBIN	ANY.MUS
	EVEN

